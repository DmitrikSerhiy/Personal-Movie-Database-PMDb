<button class="btn btn-primary" (click)='getWL()'> get watch later</button>
<button class="btn btn-primary" (click)='getFavorite()'> get favorite</button>

<button class="btn-primary" (click) = 'setMovieListName()' > print curr url </button>
<div class="container mt-3">
  <div class="row">
    <div class="col-sm">
      <button class="btn btn-primary" (click)='toggelePoster()'>
        {{showPoster ? 'Hide' : 'Show'}} Posters
      </button>
    </div>

    <div class="col-sm">
      <div class="input-group mb-3">
        <div class="input-group-prepend">
          <span class="input-group-text" id="inputGroup-sizing-default">Filter:</span>
        </div>
        <input type="text" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default" alt="Input some text"
          name="filterByWords" placeholder="Input some text" [(ngModel)]='listFilter'>
        <p>{{listFilter}}</p>
      </div>
    </div>

    <div class="col-sm">
      <div class="input-group mb-3">
        <div class="input-group-prepend">
          <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Filter by:</button>
          <div class="dropdown-menu">
            <a class="dropdown-item" href="#">Genre</a>
            <a class="dropdown-item" href="#">Tag</a>
            <a class="dropdown-item" href="#">Year</a>
            <a class="dropdown-item" href="#">Mark</a>
            <a class="dropdown-item" href="#">Runtime</a>
          </div>
        </div>
        <input type="text" class="form-control" aria-label="Text input with dropdown button">
      </div>
    </div>
  </div>

  <table class="table table-striped table-md">
    <thead>
      <tr align='center'>
        <th scope="col">{{showPoster ? 'Poster' : ''}}</th>
        <th scope="col">Title</th>
        <th scope="col">Year</th>
        <th scope="col">Runtime</th>
        <th scope="col">Tags</th>
        <th scope="col">Mark</th>
        <th scope="col"></th>
      </tr>
    </thead>
    <tbody>

      <tr *ngFor='let movie of movies; let i = index;'>
        <td>
          <img *ngIf='showPoster' src={{movie.poster}} [title]='movie.title' [style.width.px]='posterWidth' [style.height.px]='posterHeight'>
        </td>
        <td>{{movie.title}}</td>
        <td>{{movie.year}}</td>
        <td>{{movie.runtime | customRuntime}}</td>
        <td>
          <span *ngFor='let tag of movie.tags'>{{tag.name}} </span>
        </td>
        <!-- ratings -->
        <td>
          <div style="width: 110% " class="mx-0 row align-items-center">
            <rating style="width: 75%" [popover]="popTemplate" placement="right" #pop="bs-popover" triggers='click' [outsideClick]='true'
              (onShown)='setMark(moviesRatings[0][i], i);' (onHidden)='isRateTen = false;' [max]="maxRating" [(ngModel)]='moviesRatings[0][i]'
              [readonly]='isRatingReadonly' [titles]='["1", "2", "3", "4", "5", "6", "7", "8", "9", "10"]'>
            </rating>
            <h5 align="center" style="width: 15%;" class="xfont-weight-bold my-0 mx-1 border border-dark rounded">
              {{moviesRatings[0][i]}}{{moviesRatings[1][i] === 0 ? '' : '.' + moviesRatings[1][i]}}</h5>
          </div>

          <ng-template #popTemplate class="p-0">
            <div class="float: left;">
              <mat-slider #currSlider='matSlider' (onShown)='currSlider.focus()' *ngIf='!isRateTen' class="m-0; p-0;" thumbLabel [displayWith]="formatRateLabel.bind(this)"
                vertical=t rue tickInterval="1" min="0" max="9" [value]='setFirstPosition(i)'>
              </mat-slider>

            </div>
            <div class="float: left; clear: left;" style="text-align: center;">
              <button type="button" class="btn btn-outline-dark btn-sm" (click)="submitMark(); pop.hide();">OK</button>
            </div>
          </ng-template>

        </td>

        <!-- icons -->
        <td>
          <span>
            <button name="watchLater_butom" class="btn btn-outline-light p-0 customButtons" tooltip="'{{movies[i].title}}' {{  movies[i].isInWatchLater ? 'added to' : 'removed from'}}  watch later "
              placement="top" hide-delay="800" trigger='click'>
              <img [src]='movies[i].watchLaterListIconSrc' alt="icon" width="24dp" height="23dp" (click)='AddToWatchLater(i)'>
            </button>
          </span>
          <span>
            <button name="favorite_butom" class="btn btn-outline-light p-0 customButtons" tooltip="'{{movies[i].title}}' {{  movies[i].isInFavoriteList ? 'added to' : 'removed from'}}  favorite "
              placement="top" hide-delay="800" trigger='click'>
              <img [src]='movies[i].favoriteListIconSrc' alt="icon" width="24dp" height="23dp" (click)='AddToFavorite(i)'>
            </button>
          </span>

          <span class="btn-group" dropdown #dropdown="bs-dropdown" [autoClose]="false">
            <button [disabled]='!unclicableButtons' dropdownToggle type="button" class="btn btn-outline-light p-0 customButtons" (click)='AddHashtag(i); toggleClickability()'>
              <img [src]='movies[i].tagIconSrc' alt="icon" width="24dp" height="23dp">
              <span class="caret"></span>
            </button>
            <ul id="dropdown-triggers-manual" *dropdownMenu class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="button-triggers-manual"
              style="width: 250px;">
              <li role="menuitem" class="w-100">
                <div class="input-group align-self-center">
                  <input type="text" class="form-control border border-light" placeholder="tags" aria-label="tags" aria-describedby="basic-addon2"
                    [(ngModel)]="currTags" style="widows: 120px;">
                  <div class="input-group-append">
                    <button class="btn btn-outline-secondary" type="button" (click)="dropdown.toggle(true); toggleClickability()">OK</button>
                  </div>
                </div>
              </li>
            </ul>
          </span>


          <span>
            <button name="addReview_button" class="btn btn-outline-light p-0 customButtons" [disabled]='!unclicableButtons' (click)='ShowReview(i)'
              data-toggle="modal" data-target="#exampleModalCenter">
              <img [src]='movies[i].reviewIconSrc' alt="icon" width="24dp" height="23dp">
            </button>

            <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
              <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalCenterTitle"> '{{currReviewTitle}}' review </h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <div class="modal-body">
                    <p>{{currReviewText}}</p>
                  </div>
                </div>
              </div>
            </div>
          </span>

          <span>
            <button [popper]="ShowShareButtons" [popperShowOnStart]="false" [popperTrigger]="'click'" [popperPlacement]="'right'" (popperOnHidden)='ShowShareIcons(i)'
              (popperOnShown)='ShowShareIcons(i)' name="share_button" class="btn btn-outline-light p-0 customButtons">
              <img *ngIf='movies[i]' [src]='movies[i].shareIconSrc' alt="icon" width="24dp" height="23dp">
            </button>

            <popper-content #ShowShareButtons>
              <div *ngIf='movies[i]'>
                <span>
                  <button name="google_button" class="btn btn-outline-light p-0 customButtons">
                    <img [src]='movies[i].shareViaGoogleIconSrc' alt="icon" width="24dp" height="23dp">
                  </button>
                </span>
                <span>
                  <button name="google_button" class="btn btn-outline-light p-0 customButtons">
                    <img [src]='movies[i].shareViaFacebookIconSrc' alt="icon" width="24dp" height="23dp">
                  </button>
                </span>
              </div>
            </popper-content>

          </span>
        </td>
      
      </tr>
    </tbody>
  </table>

  
  <pagination [boundaryLinks]="true" [totalItems]="movies.count"
  previousText="&lsaquo;" nextText="&rsaquo;" firstText="&laquo;" lastText="&raquo;">
  </pagination>

</div>